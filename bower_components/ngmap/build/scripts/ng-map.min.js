var ngMap=angular.module("ngMap",[]);!function(){"use strict";function camelCase(e){return e.replace(SPECIAL_CHARS_REGEXP,function(e,t,n,o){return o?n.toUpperCase():n}).replace(MOZ_HACK_REGEXP,"Moz$1")}function JSONize(e){try{return JSON.parse(e),e}catch(t){return e.replace(/([\$\w]+)\s*:/g,function(e,t){return'"'+t+'":'}).replace(/'([^']+)'/g,function(e,t){return'"'+t+'"'})}}var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,Attr2Options=function($parse,NavigatorGeolocation,GeoCoder){var orgAttributes=function(e){e.length>0&&(e=e[0]);for(var t={},n=0;n<e.attributes.length;n++){var o=e.attributes[n];t[o.name]=o.value}return t},toOptionValue=function(input,options){var output,key=options.key,scope=options.scope;try{var num=Number(input);if(isNaN(num))throw"Not a number";output=num}catch(err){try{if(input.match(/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/)&&(input="["+input+"]"),output=JSON.parse(JSONize(input)),output instanceof Array){var t1stEl=output[0];if(t1stEl.constructor==Object);else if(t1stEl.constructor==Array)output=output.map(function(e){return new google.maps.LatLng(e[0],e[1])});else if(!isNaN(parseFloat(t1stEl))&&isFinite(t1stEl))return new google.maps.LatLng(output[0],output[1])}}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(e){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(e){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=key.charAt(0).toUpperCase()+key.slice(1);key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(e){output=input}else output=input}}return output},getAttrsToObserve=function(e){var t=[];if(e["ng-repeat"]||e.ngRepeat);else for(var n in e){var o=e[n];o&&o.match(/\{\{.*\}\}/)&&t.push(camelCase(n))}return t},filter=function(e){var t={};for(var n in e)n.match(/^\$/)||n.match(/^ng[A-Z]/)||(t[n]=e[n]);return t},getOptions=function(e,t){var n={};for(var o in e)if(e[o]){if(o.match(/^on[A-Z]/))continue;if(o.match(/ControlOptions$/))continue;n[o]=toOptionValue(e[o],{scope:t,key:o})}return n},getEvents=function(e,t){var n={},o=function(e){return"_"+e.toLowerCase()},i=function(t){var n=t.match(/([^\(]+)\(([^\)]*)\)/),o=n[1],i=n[2].replace(/event[ ,]*/,""),r=e.$eval("["+i+"]");return function(t){function n(e,t){return e[t]}var i=o.split(".").reduce(n,e);i.apply(this,[t].concat(r)),e.$apply()}};for(var r in t)if(t[r]){if(!r.match(/^on[A-Z]/))continue;var a=r.replace(/^on/,"");a=a.charAt(0).toLowerCase()+a.slice(1),a=a.replace(/([A-Z])/g,o);var s=t[r];n[a]=new i(s)}return n},getControlOptions=function(e){var t={};if("object"!=typeof e)return!1;for(var n in e)if(e[n]){if(!n.match(/(.*)ControlOptions$/))continue;var o=e[n],i=o.replace(/'/g,'"');i=i.replace(/([^"]+)|("[^"]+")/g,function(e,t,n){return t?t.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):n});try{var r=JSON.parse(i);for(var a in r)if(r[a]){var s=r[a];if("string"==typeof s?s=s.toUpperCase():"mapTypeIds"===a&&(s=s.map(function(e){return e.match(/^[A-Z]+$/)?google.maps.MapTypeId[e.toUpperCase()]:e})),"style"===a){var c=n.charAt(0).toUpperCase()+n.slice(1),p=c.replace(/Options$/,"")+"Style";r[a]=google.maps[p][s]}else r[a]="position"===a?google.maps.ControlPosition[s]:s}t[n]=r}catch(l){}}return t};return{camelCase:camelCase,filter:filter,getOptions:getOptions,getEvents:getEvents,getControlOptions:getControlOptions,toOptionValue:toOptionValue,getAttrsToObserve:getAttrsToObserve,orgAttributes:orgAttributes}};angular.module("ngMap").service("Attr2Options",["$parse","NavigatorGeolocation","GeoCoder",Attr2Options])}(),function(){"use strict";var e=function(e){return{geocode:function(t){var n=e.defer(),o=new google.maps.Geocoder;return o.geocode(t,function(e,t){t==google.maps.GeocoderStatus.OK?n.resolve(e):n.reject("Geocoder failed due to: "+t)}),n.promise}}};angular.module("ngMap").service("GeoCoder",["$q",e])}(),function(){"use strict";var e=function(e){return{getCurrentPosition:function(){var t=e.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject(e)}):t.reject("Browser Geolocation service failed."),t.promise},watchPosition:function(){return"TODO"},clearWatch:function(){return"TODO"}}};angular.module("ngMap").service("NavigatorGeolocation",["$q",e])}(),function(){"use strict";var e=function(e){var t=function(t,n){n=n||t.getCenter();var o=e.defer(),i=new google.maps.StreetViewService;return i.getPanoramaByLocation(n||t.getCenter,100,function(e,t){t===google.maps.StreetViewStatus.OK?o.resolve(e.location.pano):o.resolve(!1)}),o.promise},n=function(e,t){var n=new google.maps.StreetViewPanorama(e.getDiv(),{enableCloseButton:!0});n.setPano(t)};return{getPanorama:t,setPanorama:n}};angular.module("ngMap").service("StreetView",["$q",e])}(),ngMap.directive("bicyclingLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.BicyclingLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.orgAttributes(o),s=t.filter(i),c=t.getOptions(s),p=t.getEvents(e,s),l=n(c,p);r.addObject("bicyclingLayers",l),r.observeAttrSetObj(a,i,l),o.bind("$destroy",function(){r.deleteObject("biclclingLayers",l)})}}}]),ngMap.directive("cloudLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.weather.CloudLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.orgAttributes(o),s=t.filter(i),c=t.getOptions(s),p=t.getEvents(e,s),l=n(c,p);r.addObject("cloudLayers",l),r.observeAttrSetObj(a,i,l),o.bind("$destroy",function(){r.deleteObject("cloudLayers",l)})}}}]),ngMap.directive("customControl",["Attr2Options","$compile",function(e,t){var n=e;return{restrict:"E",require:"^map",link:function(e,o,i,r){o.css("display","none");var a=(n.orgAttributes(o),n.filter(i)),s=n.getOptions(a,e),c=n.getEvents(e,a),p=t(o.html().trim())(e),l=p[0];for(var u in c)google.maps.event.addDomListener(l,u,c[u]);r.addObject("customControls",l),e.$on("mapInitialized",function(e,t){var n=s.position;t.controls[google.maps.ControlPosition[n]].push(l)})}}}]),function(){"use strict";var e,t=new google.maps.DirectionsService,n=function(e,t){e.panel&&(e.panel=document.getElementById(e.panel)||document.querySelector(e.panel));var n=new google.maps.DirectionsRenderer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n},o=function(o,i){e=o,t=new google.maps.DirectionsService;var r=function(e,n){var o=n,r=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];for(var a in o)-1===r.indexOf(a)&&delete o[a];o.origin&&o.destination&&t.route(o,function(t,n){n==google.maps.DirectionsStatus.OK&&i(function(){e.setDirections(t)})})},a=function(t,o,i,a){var s=e.orgAttributes(o),c=e.filter(i),p=e.getOptions(c),l=e.getEvents(t,c),u=e.getAttrsToObserve(s),g=n(p,l);a.addObject("directionsRenderers",g),u.forEach(function(t){!function(t){i.$observe(t,function(n){if(p[t]!==n){var o=e.toOptionValue(n,{key:t});p[t]=o,r(g,p)}})}(t)}),t.$on("mapInitialized",function(){r(g,p)})};return{restrict:"E",require:"^map",link:a}};o.$inject=["Attr2Options","$timeout"],angular.module("ngMap").directive("directions",o)}(),ngMap.directive("drawingManager",["Attr2Options",function(e){var t=e;return{restrict:"E",require:"^map",link:function(e,n,o,i){var r=(t.orgAttributes(n),t.filter(o)),a=t.getOptions(r),s=t.getControlOptions(r),c=t.getEvents(e,r),p=new google.maps.drawing.DrawingManager({drawingMode:a.drawingmode,drawingControl:a.drawingcontrol,drawingControlOptions:s.drawingControlOptions,circleOptions:a.circleoptions,markerOptions:a.markeroptions,polygonOptions:a.polygonoptions,polylineOptions:a.polylineoptions,rectangleOptions:a.rectangleoptions}),c=t.getEvents(e,r);for(var l in c)google.maps.event.addListener(p,l,c[l]);i.addObject("mapDrawingManager",p)}}}]),ngMap.directive("dynamicMapsEngineLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.visualization.DynamicMapsEngineLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.filter(i),s=t.getOptions(a),c=t.getEvents(e,a,c),p=n(s,c);r.addObject("mapsEngineLayers",p)}}}]),ngMap.directive("fusionTablesLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.FusionTablesLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.filter(i),s=t.getOptions(a),c=t.getEvents(e,a,c),p=n(s,c);r.addObject("fusionTablesLayers",p)}}}]),ngMap.directive("heatmapLayer",["Attr2Options","$window",function(e,t){var n=e;return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=n.filter(i),s=n.getOptions(a);if(s.data=t[i.data]||e[i.data],!(s.data instanceof Array))throw"invalid heatmap data";s.data=new google.maps.MVCArray(s.data);{var c=new google.maps.visualization.HeatmapLayer(s);n.getEvents(e,a)}r.addObject("heatmapLayers",c)}}}]),function(){"use strict";var infoWindow=function(Attr2Options,$compile,$timeout,$parse){var parser=Attr2Options,getInfoWindow=function(options,events,element){var infoWindow;!options.position||options.position instanceof google.maps.LatLng||delete options.position,infoWindow=new google.maps.InfoWindow(options),Object.keys(events).length>0;for(var eventName in events)eventName&&google.maps.event.addListener(infoWindow,eventName,events[eventName]);var template=element.html().trim();if(1!=angular.element(template).length)throw"info-window working as a template must have a container";return infoWindow.__template=template.replace(/\s?ng-non-bindable[='"]+/,""),infoWindow.__compile=function(e){var t=$compile(infoWindow.__template)(e);e.$apply(),infoWindow.setContent(t[0])},infoWindow.__eval=function(){var template=infoWindow.__template,_this=this;return template=template.replace(/{{(event|this)[^;\}]+}}/g,function(match){var expression=match.replace(/[{}]/g,"").replace("this.","_this.");return eval(expression)})},infoWindow.__open=function(e,t){var n=this;$timeout(function(){var o=infoWindow.__template;infoWindow.__template=infoWindow.__eval.apply(n),infoWindow.__compile(e),t&&t.getPosition?infoWindow.open(infoWindow.map,t):infoWindow.open(infoWindow.map),infoWindow.__template=o})},infoWindow},linkFunc=function(e,t,n,o){t.css("display","none");var i,r=parser.orgAttributes(t),a=parser.filter(n),s=parser.getOptions(a,e),c=parser.getEvents(e,a);!s.position||s.position instanceof google.maps.LatLng||(i=s.position);var p=getInfoWindow(s,c,t);i&&o.getGeoLocation(i).then(function(t){p.setPosition(t),p.__open(e,t);var o=n.geoCallback;o&&$parse(o)(e)}),o.addObject("infoWindows",p),o.observeAttrSetObj(r,n,p),t.bind("$destroy",function(){o.deleteObject("infoWindows",p)}),e.$on("mapInitialized",function(t,n){if(p.map=n,p.visible&&p.__open(e),p.visibleOnMarker){var o=p.visibleOnMarker;p.__open(e,n.markers[o])}}),e.showInfoWindow=e.showInfoWindow||function(t,n,i){var r=o.map.infoWindows[n],a=i?i:this.getPosition?this:null;r.__open.apply(this,[e,a])},e.hideInfoWindow=e.hideInfoWindow||function(e,t){var n=o.map.infoWindows[t];n.close()}};return{restrict:"E",require:"^map",link:linkFunc}};infoWindow.$inject=["Attr2Options","$compile","$timeout","$parse"],angular.module("ngMap").directive("infoWindow",infoWindow)}(),ngMap.directive("kmlLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.KmlLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.orgAttributes(o),s=t.filter(i),c=t.getOptions(s),p=t.getEvents(e,s),l=n(c,p);r.addObject("kmlLayers",l),r.observeAttrSetObj(a,i,l),o.bind("$destroy",function(){r.deleteObject("kmlLayers",l)})}}}]),ngMap.directive("mapData",["Attr2Options",function(e){var t=e;return{restrict:"E",require:"^map",link:function(e,n,o){var i=t.filter(o),r=t.getOptions(i),a=t.getEvents(e,i,a);e.$on("mapInitialized",function(t,n){for(var o in r)if(o){var i=r[o];"function"==typeof e[i]?n.data[o](e[i]):n.data[o](i)}for(var s in a)a[s]&&n.data.addListener(s,a[s])})}}}]),ngMap.directive("mapLazyLoad",["$compile","$timeout",function(e,t){"use strict";var n={compile:function(n,o){!o.mapLazyLoad&&void 0;var i=n.html(),r=o.mapLazyLoad;return document.querySelector('script[src="'+r+'?callback=lazyLoadCallback"]')?!1:(n.html(""),{pre:function(n,o){if(window.lazyLoadCallback=function(){t(function(){o.html(i),e(o.contents())(n)},100)},void 0===window.google||void 0===window.google.maps){var a=document.createElement("script");a.src=r+(r.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.body.appendChild(a)}else o.html(i),e(o.contents())(n)}})}};return n}]),ngMap.directive("mapType",["Attr2Options","$window",function(e,t){return{restrict:"E",require:"^map",link:function(e,n,o,i){var r,a=o.name;if(!a)throw"invalid map-type name";if(o.object){var s=e[o.object]?e:t;r=s[o.object],"function"==typeof r&&(r=new r)}if(!r)throw"invalid map-type object";e.$on("mapInitialized",function(e,t){t.mapTypes.set(a,r)}),i.addObject("mapTypes",r)}}}]),function(){"use strict";function e(e,t){var n;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n}var t=function(t,n,o){var i=t,r=function(t,r,a,s){var c=i.orgAttributes(r);t.google=google;var p=document.createElement("div");p.style.width="100%",p.style.height="100%",r.prepend(p),"block"!=e(r[0],"display")&&r.css("display","block"),e(r[0],"height").match(/^(0|auto)/)&&r.css("height","300px");var l=function(e,i){var r=new google.maps.Map(p,{});r.markers={},r.shapes={},n(function(){google.maps.event.trigger(r,"resize")}),e.zoom=e.zoom||15;var l=e.center;l?l instanceof google.maps.LatLng||(delete e.center,s.getGeoLocation(l).then(function(e){r.setCenter(e);var n=a.geoCallback;n&&o(n)(t)},function(){r.setCenter(g.geoFallbackCenter)})):e.center=new google.maps.LatLng(0,0),r.setOptions(e);for(var u in i)u&&google.maps.event.addListener(r,u,i[u]);s.observeAttrSetObj(c,a,r),s.map=r,s.addObjects(s._objects),t.map=r,t.map.scope=t,t.$emit("mapInitialized",r),t.maps=t.maps||{},t.maps[g.id||Object.keys(t.maps).length]=r,t.$emit("mapsInitialized",t.maps)},u=i.filter(a),g=i.getOptions(u,t),d=i.getControlOptions(u),f=angular.extend(g,d),v=i.getEvents(t,u);a.initEvent?t.$on(a.initEvent,function(){!s.map&&l(f,v)}):l(f,v)};return{restrict:"AE",controller:"MapController",link:r}};angular.module("ngMap").directive("map",["Attr2Options","$timeout","$parse",t])}(),function(){"use strict";var e=function(e,t,n,o){var i=o,r=this,a=function(e,t,n){e.$observe(t,function(e){if(e){var o=i.camelCase("set-"+t),a=i.toOptionValue(e,{key:t});n[o]&&(t.match(/center|position/)&&"string"==typeof a?r.getGeoLocation(a).then(function(e){n[o](e)}):n[o](a))}})};this.map=null,this._objects=[],this.addObject=function(e,t){if(this.map){this.map[e]=this.map[e]||{};var n=Object.keys(this.map[e]).length;this.map[e][t.id||n]=t,"infoWindows"!=e&&t.setMap&&t.setMap&&t.setMap(this.map),t.centered&&t.position&&this.map.setCenter(t.position)}else t.groupName=e,this._objects.push(t)},this.deleteObject=function(e,t){var n=t.map[e];for(var o in n)n[o]===t&&delete n[o];t.map&&t.setMap&&t.setMap(null)},this.addObjects=function(e){for(var t=0;t<e.length;t++){var n=e[t];n instanceof google.maps.Marker?this.addObject("markers",n):n instanceof google.maps.Circle||n instanceof google.maps.Polygon||n instanceof google.maps.Polyline||n instanceof google.maps.Rectangle||n instanceof google.maps.GroundOverlay?this.addObject("shapes",n):this.addObject(n.groupName,n)}},this.getGeoLocation=function(o){var i=e.defer();return!o||o.match(/^current/i)?t.getCurrentPosition().then(function(e){var t=e.coords.latitude,n=e.coords.longitude,o=new google.maps.LatLng(t,n);i.resolve(o)},function(e){i.reject(e)}):n.geocode({address:o}).then(function(e){i.resolve(e[0].geometry.location)},function(e){i.reject(e)}),i.promise},this.observeAttrSetObj=function(e,t,n){var o=i.getAttrsToObserve(e);Object.keys(o).length;for(var r=0;r<o.length;r++)a(t,o[r],n)}};e.$inject=["$q","NavigatorGeolocation","GeoCoder","Attr2Options"],angular.module("ngMap").controller("MapController",e)}(),ngMap.directive("mapsEngineLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.visualization.MapsEngineLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.filter(i),s=t.getOptions(a),c=t.getEvents(e,a,c),p=n(s,c);r.addObject("mapsEngineLayers",p)}}}]),function(){"use strict";var e=function(e,t){var n;if(e.icon instanceof Object){(""+e.icon.path).match(/^[A-Z_]+$/)&&(e.icon.path=google.maps.SymbolPath[e.icon.path]);for(var o in e.icon){var i=e.icon[o];"anchor"==o||"origin"==o?e.icon[o]=new google.maps.Point(i[0],i[1]):("size"==o||"scaledSize"==o)&&(e.icon[o]=new google.maps.Size(i[0],i[1]))}}e.position instanceof google.maps.LatLng||(e.position=new google.maps.LatLng(0,0)),n=new google.maps.Marker(e),Object.keys(t).length>0;for(var r in t)r&&google.maps.event.addListener(n,r,t[r]);return n},t=function(t,n){var o=t,i=function(t,i,r,a){var s,c=o.orgAttributes(i),p=o.filter(r),l=o.getOptions(p,t),u=o.getEvents(t,p);l.position instanceof google.maps.LatLng||(s=l.position.position);var g=e(l,u);a.addObject("markers",g),s&&a.getGeoLocation(s).then(function(e){g.setPosition(e),l.centered&&g.map.setCenter(e);var o=r.geoCallback;o&&n(o)(t)}),a.observeAttrSetObj(c,r,g),i.bind("$destroy",function(){a.deleteObject("markers",g)})};return{restrict:"E",require:"^map",link:i}};t.$inject=["Attr2Options","$parse"],angular.module("ngMap").directive("marker",t)}(),ngMap.directive("overlayMapType",["Attr2Options","$window",function(e,t){return{restrict:"E",require:"^map",link:function(e,n,o,i){var r,a=o.initMethod||"insertAt";if(o.object){var s=e[o.object]?e:t;r=s[o.object],"function"==typeof r&&(r=new r)}if(!r)throw"invalid map-type object";e.$on("mapInitialized",function(e,t){if("insertAt"==a){var n=parseInt(o.index,10);t.overlayMapTypes.insertAt(n,r)}else"push"==a&&t.overlayMapTypes.push(r)}),i.addObject("overlayMapTypes",r)}}}]),function(){"use strict";var e=function(e,t){var n,o=e,i=function(e,i,r){{var a=o.filter(r);o.getOptions(a)}n=new google.maps.places.Autocomplete(i[0]),google.maps.event.addListener(n,"place_changed",function(){var o=n.getPlace(),i=t(r.onPlaceChanged);i(e,{place:o})})};return{restrict:"A",link:i}};e.$inject=["Attr2Options","$parse"],angular.module("ngMap").directive("placesAutoComplete",e)}(),function(){"use strict";var e=function(e){return new google.maps.LatLngBounds(e[0],e[1])},t=function(t,n){var o,i=t.name;if(delete t.name,t.icons)for(var r=0;r<t.icons.length;r++){var a=t.icons[r];a.icon.path.match(/^[A-Z_]+$/)&&(a.icon.path=google.maps.SymbolPath[a.icon.path])}switch(i){case"circle":t.center instanceof google.maps.LatLng||(t.center=new google.maps.LatLng(0,0)),o=new google.maps.Circle(t);break;case"polygon":o=new google.maps.Polygon(t);break;case"polyline":o=new google.maps.Polyline(t);break;case"rectangle":t.bounds&&(t.bounds=e(t.bounds)),o=new google.maps.Rectangle(t);break;case"groundOverlay":case"image":var s=t.url,c=e(t.bounds),p={opacity:t.opacity,clickable:t.clickable,id:t.id};o=new google.maps.GroundOverlay(s,c,p)}for(var l in n)n[l]&&google.maps.event.addListener(o,l,n[l]);return o},n=function(e,n){var o=e,i=function(e,i,r,a){var s,c,p=o.orgAttributes(i),l=o.filter(r),u=o.getOptions(l),g=o.getEvents(e,l);c=u.name,u.center instanceof google.maps.LatLng||(s=u.center);var d=t(u,g);a.addObject("shapes",d),s&&"circle"==c&&a.getGeoLocation(s).then(function(t){d.setCenter(t),d.centered&&d.map.setCenter(t);var o=r.geoCallback;o&&n(o)(e)}),a.observeAttrSetObj(p,r,d),i.bind("$destroy",function(){a.deleteObject("shapes",d)})};return{restrict:"E",require:"^map",link:i}};n.$inject=["Attr2Options","$parse"],angular.module("ngMap").directive("shape",n)}(),function(){"use strict";var e=function(e){var t=e,n=function(e,t,n){var o,i;t.container&&(i=document.getElementById(t.container),i=i||document.querySelector(t.container)),i?o=new google.maps.StreetViewPanorama(i,t):(o=e.getStreetView(),o.setOptions(t));for(var r in n)r&&google.maps.event.addListener(o,r,n[r]);return o},o=function(e,o,i){var r=(t.orgAttributes(o),t.filter(i)),a=t.getOptions(r),s=t.getControlOptions(r),c=angular.extend(a,s),p=t.getEvents(e,r);e.$on("mapInitialized",function(e,t){var o=n(t,c,p);t.setStreetView(o),!o.getPosition()&&o.setPosition(t.getCenter()),google.maps.event.addListener(o,"position_changed",function(){t.setCenter(o.getPosition())})})};return{restrict:"E",require:"^map",link:o}};e.$inject=["Attr2Options"],angular.module("ngMap").directive("streetViewPanorama",e)}(),ngMap.directive("trafficLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.TrafficLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.orgAttributes(o),s=t.filter(i),c=t.getOptions(s),p=t.getEvents(e,s),l=n(c,p);r.addObject("trafficLayers",l),r.observeAttrSetObj(a,i,l),o.bind("$destroy",function(){r.deleteObject("trafficLayers",l)})}}}]),ngMap.directive("transitLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.TransitLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.orgAttributes(o),s=t.filter(i),c=t.getOptions(s),p=t.getEvents(e,s),l=n(c,p);r.addObject("transitLayers",l),r.observeAttrSetObj(a,i,l),o.bind("$destroy",function(){r.deleteObject("transitLayers",l)})}}}]),ngMap.directive("weatherLayer",["Attr2Options",function(e){var t=e,n=function(e,t){var n=new google.maps.weather.WeatherLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:"^map",link:function(e,o,i,r){var a=t.orgAttributes(o),s=t.filter(i),c=t.getOptions(s),p=t.getEvents(e,s),l=n(c,p);r.addObject("weatherLayers",l),r.observeAttrSetObj(a,i,l),o.bind("$destroy",function(){r.deleteObject("weatherLayers",l)})}}}]);